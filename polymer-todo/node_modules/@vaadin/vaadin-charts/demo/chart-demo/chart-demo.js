import { PolymerElement } from '@polymer/polymer/polymer-element.js';
import '../common/demo-plus-sources-area.js';
import '../../vaadin-chart.js';
import '@polymer/iron-ajax/iron-ajax.js';
import '@vaadin/vaadin-grid/vaadin-grid.js';
import '../common/demo-styles.js';
import { html } from '@polymer/polymer/lib/utils/html-tag.js';
import { importHref } from '@polymer/polymer/lib/utils/import-href.js';
class ChartDemo extends PolymerElement {
  static get template() {
    return html`
    <style>
      :host {
        height: 100%;
      }
    </style>
`;
  }

  static get is() {
    return 'chart-demo';
  }

  static get properties() {
    return {
      demo: String,
      category: String,
      htmlValue: String
    };
  }

  constructor() {
    super();
    this.__initialized = false;
  }

  loadDemoContent() {
    if (!this.__initialized) {
      var resolvedDemoUrl = this.resolveUrl('../demos/' + (this.category ? this.category + '/' : '') + this.demo + '.html');
      importHref(resolvedDemoUrl, (result) => {
        const template = result.target.import.querySelector('template');
        const demoContent = document.importNode(template.content, true);
        const demoPlusSourcesArea = document.createElement('demo-plus-sources-area');
        while (demoContent.childNodes.length > 0) {
          demoPlusSourcesArea.appendChild(demoContent.childNodes[0]);
        }

        this.shadowRoot.appendChild(demoPlusSourcesArea);

        this.__initialized = true;
      });
    }
  }
}

window.customElements.define(ChartDemo.is, ChartDemo);
